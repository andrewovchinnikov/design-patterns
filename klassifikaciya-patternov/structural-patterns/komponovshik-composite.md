# Компоновщик (Composite)

### **Описание**

Паттерн Компоновщик позволяет клиентам обрабатывать отдельные объекты и составные объекты единообразно. Он структурирует объекты в виде дерева, чтобы представлять иерархические структуры. Компоновщик позволяет клиентам работать с отдельными объектами и составными объектами одинаково.

**Структура**

1. **Component (Компонент)**:
   * Определяет интерфейс для всех объектов в композиции, как для листьев, так и для композитов.
   * Объявляет интерфейс для доступа к потомкам и управления ими.
2. **Leaf (Лист)**:
   * Представляет листовые объекты в композиции. Лист не имеет потомков.
3. **Composite (Композит)**:
   * Определяет поведение для компонентов, имеющих потомков.
   * Хранит потомков и реализует операции, связанные с потомками.

**UML Диаграмма**

{% code lineNumbers="true" %}
```plant-uml
@startuml
abstract class Component {
    +operation()
    +add(Component)
    +remove(Component)
    +getChild(int)
}

class Leaf extends Component {
    +operation()
}

class Composite extends Component {
    -children: List<Component>
    +operation()
    +add(Component)
    +remove(Component)
    +getChild(int)
}

Component <|-- Leaf
Component <|-- Composite
@enduml
```
{% endcode %}

**Описание Элементов**

1. **Component (Компонент)**:
   * **operation()**: Операция, которая должна быть реализована как для листьев, так и для композитов.
   * **add(Component)**: Добавляет компонент в составной объект.
   * **remove(Component)**: Удаляет компонент из составного объекта.
   * **getChild(int)**: Возвращает дочерний компонент по индексу.
2. **Leaf (Лист)**:
   * **operation()**: Реализация операции для листового объекта.
3. **Composite (Композит)**:
   * **children**: Список дочерних компонентов.
   * **operation()**: Реализация операции для составного объекта. Обычно вызывает операцию для всех дочерних компонентов.
   * **add(Component)**: Добавляет компонент в список дочерних компонентов.
   * **remove(Component)**: Удаляет компонент из списка дочерних компонентов.
   * **getChild(int)**: Возвращает дочерний компонент по индексу.

**Преимущества**

1. **Единообразие**: Клиенты могут работать с отдельными объектами и составными объектами одинаково.
2. **Гибкость**: Позволяет легко добавлять новые виды объектов в систему.
3. **Простота**: Упрощает управление иерархическими структурами.

**Недостатки**

1. **Сложность**: Может усложнить дизайн системы из-за необходимости поддерживать единообразие интерфейсов.
2. **Производительность**: Операции с составными объектами могут быть менее эффективными из-за рекурсивных вызовов.

**Применение**

1. **Когда нужно представлять иерархические структуры объектов**.
2. **Когда клиенты должны единообразно работать с отдельными объектами и составными объектами**.
3. **Когда нужно легко добавлять новые виды объектов в систему**.

**Примеры**

1. **Файловая система**: Файлы и папки могут быть представлены как листья и композиты соответственно.
2. **Графические редакторы**: Графические объекты (линии, круги) и группы объектов могут быть представлены как листья и композиты.
3. **Организационные структуры**: Сотрудники и отделы могут быть представлены как листья и композиты.

Паттерн Компоновщик является мощным инструментом для управления иерархическими структурами и обеспечения единообразия в работе с отдельными и составными объектами.
