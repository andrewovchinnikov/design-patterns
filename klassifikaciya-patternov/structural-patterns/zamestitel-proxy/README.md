# Заместитель (Proxy)

Паттерн "Заместитель" (Proxy) является структурным паттерном проектирования, который предоставляет объект-заместитель для контроля доступа к другому объекту. Этот паттерн позволяет добавлять дополнительные функции к объекту, не изменяя его исходный код. Основная идея заключается в том, чтобы создать промежуточный объект, который управляет доступом к реальному объекту и может выполнять дополнительные действия перед или после вызова методов реального объекта.

### **UML Диаграмма**

{% code overflow="wrap" lineNumbers="true" %}
```plant-uml
@startuml
interface Subject {
    +request()
}

class RealSubject implements Subject {
    +request()
}

class Proxy implements Subject {
    -realSubject: RealSubject
    +request()
}

Subject <|-- RealSubject
Subject <|-- Proxy
Proxy --> RealSubject
@enduml

```
{% endcode %}

### Основные элементы паттерна

1. **Subject (Интерфейс субъекта)**:
   * **Описание**: Определяет общий интерфейс для реального объекта и заместителя. Этот интерфейс позволяет клиентам работать с реальным объектом и заместителем одинаково.
   * **Методы**:
     * `request()`: Метод, который должен быть реализован как в реальном объекте, так и в заместителе.
2. **RealSubject (Реальный субъект)**:
   * **Описание**: Реальный объект, который выполняет основную логику. Этот объект содержит бизнес-логику и выполняет основные операции.
   * **Методы**:
     * `request()`: Реализация метода, который выполняет основную логику.
3. **Proxy (Заместитель)**:
   * **Описание**: Объект-заместитель, который контролирует доступ к реальному объекту. Заместитель может выполнять дополнительные действия перед или после вызова методов реального объекта, такие как проверка доступа, логирование, кэширование и т.д.
   * **Поля**:
     * `realSubject: RealSubject`: Ссылка на реальный объект. Заместитель может создавать реальный объект по мере необходимости (ленивая инициализация).
   * **Методы**:
     * `request()`: Реализация метода, который контролирует доступ к реальному объекту. В этом методе могут быть добавлены дополнительные действия перед или после вызова метода реального объекта.

### Преимущества паттерна "Заместитель"

1. **Контроль доступа**: Позволяет контролировать доступ к реальному объекту, добавляя проверки безопасности, логирование и другие функции.
2. **Оптимизация**: Может использоваться для оптимизации производительности, например, кэширования результатов выполнения методов.
3. **Гибкость**: Позволяет добавлять новые функции без изменения исходного кода реального объекта.
4. **Ленивая инициализация**: Позволяет создавать реальный объект только при необходимости, что может быть полезно для экономии ресурсов.

### Недостатки паттерна "Заместитель"

1. **Сложность**: Увеличивает сложность кода за счет добавления дополнительных уровней абстракции.
2. **Производительность**: В некоторых случаях может негативно сказаться на производительности из-за дополнительных проверок и операций.

### Применение паттерна "Заместитель"

1. **Контроль доступа**: Когда необходимо контролировать доступ к объекту, например, проверка прав доступа.
2. **Оптимизация**: Когда нужно оптимизировать производительность, например, кэширование результатов выполнения методов.
3. **Ленивая инициализация**: Когда объект должен быть создан только при необходимости.
4. **Удаленные объекты**: Когда нужно работать с удаленными объектами, например, через сеть.

### Примеры использования паттерна "Заместитель"

1. **Кэширование**: Заместитель может кэшировать результаты выполнения методов реального объекта, чтобы уменьшить количество вызовов.
2. **Логирование**: Заместитель может логировать все вызовы методов реального объекта для отладки или мониторинга.
3. **Проверка доступа**: Заместитель может проверять права доступа перед выполнением методов реального объекта.
4. **Виртуальные заместители**: Заместитель может использоваться для создания виртуальных объектов, которые создаются только при необходимости.

Паттерн "Заместитель" является мощным инструментом для управления доступом к объектам и добавления дополнительных функций без изменения исходного кода. Он широко используется в различных областях, таких как сетевые приложения, системы безопасности и оптимизация производительности.
